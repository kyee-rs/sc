------------ ðŸ“‚ðŸ—„ï¸ Simple Cache: Temporary (or not?) file hosting ------------
============================== Made by @voxelin ==============================

> WARNING: This branch is used specially to integrate with TimescaleDB.
> If you have regular postgresql, mysql, sqlite database, please refer to origin/main.

## Introduction
----------------------------------
Simple Cache is a service for minimalistic temporary (or not?) file hosting.
SC allows you to upload any file via `curl`, `httpie` or any other HTTP Client,
and store it for configured number of days (or forever).

## Routes
----------------------------------
* GET `/` - Returns 403 status code
* POST `/` - Uploads a file from multipart/form-data (Field: `file` or `url`)
* GET `/:id` - Loads a file preview in browser if possible. If not, downloads the file.

## Configuration
----------------------------------
The configuration can be done either via the file or the environment variables. The priority of loading is following:

| LOAD DEFAULT VALUES | ---> | LOAD CONFIG.HCL | ---> | LOAD ENVIRONMENT VARIABLES |

If some keys exist in multiple places (e.g. server.port in `config.hcl` and SC_SERVER_PORT is given) then the latest load is prioritized. (Environment variables are superior)

### `config.hcl`

Example `config.hcl`:
------------------------------------------------------------------------
server {
  serverName = "Simple Cache v1.2.4"                                         # Sets the `Server` header for each response
  appName = "Simple Cache"                                                   # Sets the app name to display in terminal
  port = 8080                                                                # Server port
  databaseUrl = "postgres://user:password@localhost:5432/timescaledb"        # TimescaleDB Connection URL
  seed = 3719                                                                # Seed for ID generation [type: random number > 0]
}

logger {
  forceColors = false                                                        # Force colored output
  fullTimestamp = true
}

limits {
  maxSize = 10                                                               # Max uploaded body size in MB
  blockTor = false                                                           # Block TOR exit nodes
  ipBlacklist = []                                                           # ["168.0.2.3", "1.2.3.4"...]
}
------------------------------------------------------------------------

### Environment Variables

Configuration alternatively can be done through the environment variables. See the table below.

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Environment       â”‚ Alternative in `config.hcl` â”‚                     Default Value                     â”‚                   Description                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ SC_SERVER_SERVERNAME    â”‚ server.serverName           â”‚ "Simple Cache v1.2.4"                                 â”‚ `Server` header for each response                â”‚
â”‚ SC_SERVER_APPNAME       â”‚ server.appName              â”‚ "Simple Cache"                                        â”‚ App name to display in the terminal              â”‚
â”‚ SC_SERVER_PORT          â”‚ server.port                 â”‚ 8080                                                  â”‚ Server port                                      â”‚
â”‚ SC_SERVER_DATABASEURL   â”‚ server.databaseURL          â”‚ "postgres://user:password@localhost:5432/timescaledb" â”‚ TimescaleDB Connection URL                       â”‚
â”‚ SC_SERVER_SEED          â”‚ server.seed                 â”‚ 3719                                                  â”‚ Seed for ID generation [type: random number > 0] â”‚
â”‚ SC_LOGGER_FORCECOLORS   â”‚ logger.forceColors          â”‚ false                                                 â”‚ Force colored output                             â”‚
â”‚ SC_LOGGER_FULLTIMESTAMP â”‚ logger.fullTimestamp        â”‚ true                                                  â”‚ -                                                â”‚
â”‚ SC_LIMITS_MAXSIZE       â”‚ limits.maxSize              â”‚ 10                                                    â”‚ Max uploaded body size in MB                     â”‚
â”‚ SC_LIMITS_BLOCKTOR      â”‚ limits.blockTor             â”‚ false                                                 â”‚ Block TOR exit nodes                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

